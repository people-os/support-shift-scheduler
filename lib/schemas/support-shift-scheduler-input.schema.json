{
  "$schema": "http://json-schema.org/draft-04/schema#",

  "description": "Support shift scheduler input JSON schema",
  "type": "object",
  "properties": {
    "agents": {
      "description": "List of agents to consider while generating the schedule",
      "type": "array",
      "items": {
        "type": "object",
        "properties": {
          "handle": {
            "description": "Agent's handle",
            "type": "string",
            "pattern": "^@[a-zA-Z0-9_\\-+]"
          },
          "email": {
            "description": "Agent's email address",
            "type": "string",
            "pattern": "[a-zA-Z0-9._%+\\-]+@[a-zA-Z0-9.\\-]+\\.[a-zA-Z]{2,4}"
          },
          "weekAverageHours": {
            "description": "Total community hours divided by total weeks worked",
            "type": "number"
          },
          "idealShiftLength": {
            "description": "Preferred shift length in hours",
            "type": "number",
            "minimum": 2,
            "maximum": 8
          },
          "availableHours": {
            "description": "Availability for each day of the week, Monday to Friday",
            "type": "array",
            "minItems": 5,
            "maxItems": 5,
            "items": {
              "description": "Availability for single weekday",
              "type": "array",
              "minItems": 26,
              "maxItems": 26,
              "items": {
                "description": "Preference legend - 0: unavailable, 1: preferred, 2: available, not preferred, 4: volunteered",
                "type": "number",
                "minimum": 0,
                "maximum": 4
              }
            }
          }
        },
        "required": [ "handle", "email", "weekAverageHours", "idealShiftLength", "availableHours"]
      }
    },
    "options": {
      "type": "object",
      "properties": {
        "custom_uuid": {
          "description": "Set a custom UUID for the job scheduling request. If this custom_uuid is already set for an existing job, the old job will be removed (and stopped if running) before the new one starts. (Default: empty / random uuid is generated by the server)",
          "type": "string"
        },
        "startMondayDate": {
          "description": "Monday date at start of week being scheduled in YYYY-MM-DD format",
          "type": "string",
          "format": "date"
        },
        "numConsecutiveDays": {
          "description": "Number of consecutive days to schedule",
          "type": "number",
          "minimum": 1,
          "maximum": 5
        },
        "numSimultaneousTracks": {
          "description": "Number of parallel support tracks to schedule",
          "type": "number"
        },
        "supportStartHour": {
          "description": "Balena support start time (default: 8)",
          "type": "number",
          "minimum": 0,
          "maximum": 26
        },
        "supportEndHour": {
          "description": "Balena support end time (default: 26)",
          "type": "number",
          "minimum": 0,
          "maximum": 26
        },
        "shiftMinDuration": {
          "description": "Minimum duration of a shift (default: 2)",
          "type": "number"
        },
        "shiftMaxDuration": {
          "description": "Minimum duration of a shift (default: 8)",
          "type": "number"
        },
        "optimizationTimeout": {
          "description": "Optimization timeout for constraint solver (in seconds)",
          "type": "number"
        }
      },
      "required": ["startMondayDate", "numConsecutiveDays", "supportStartHour", "supportEndHour", "shiftMinDuration", "shiftMaxDuration", "optimizationTimeout"]
    }
  },
  "required": [ "agents", "options" ]
}
